# üå≤ **2. √Årboles de Decisi√≥n y Derivados** {-}  

**Ejemplos:** Decision Tree, Random Forest, Gradient Boosting  
**Cu√°ndo usarlo:**  

* Problemas tabulares con relaciones no lineales y variables categ√≥ricas o num√©ricas.
* Cuando interpretabilidad es importante.

**Ventajas:** Manejan datos heterog√©neos, f√°ciles de interpretar (√°rboles simples).   
**Limitaciones:** Sobreajuste en √°rboles simples; menor desempe√±o en datos muy ruidosos sin ensambles.

---

## Classification and Regression Tree (CART)  {-} 

```{r, echo =FALSE}

criterios <- c(
  "Tipo de modelo",
  "Variable respuesta",
  "Variables predictoras",
  "Relaci√≥n entre variables",
  "Normalidad de residuos",
  "Independencia de errores",
  "Homoscedasticidad",
  "Sensible a outliers",
  "Multicolinealidad entre predictores",
  "Interpretabilidad",
  "Velocidad y eficiencia",
  "Validaci√≥n cruzada",
  "No funciona bien si..."
)

aplica <- c(
  "‚úÖ Supervisado",
  "‚úÖ Categ√≥rica o Continua",
  "‚úÖ Num√©ricas y Categ√≥ricas",
  "‚úÖ No lineal y con interacciones",
  "‚ùå No requiere",
  "‚ö†Ô∏è Puede verse afectado",
  "‚ö†Ô∏è No necesario pero deseable",
  "‚ö†Ô∏è S√≠, en puntos de corte",
  "‚úÖ No se ve afectado",
  "‚úÖ Alta (gr√°fico del √°rbol)",
  "‚úÖ R√°pido en datasets medianos",
  "‚úÖ Muy usado para poda y ajuste",
  "‚ùå Muy profundo (overfitting), datos muy ruidosos"
)

detalles <- c(
  "Algoritmo basado en divisiones binarias",
  "Puede predecir clases o valores continuos",
  "Acepta todo tipo de variables predictoras",
  "Captura relaciones complejas y no lineales",
  "No requiere distribuci√≥n normal",
  "Idealmente los errores deben ser independientes",
  "La varianza constante mejora resultados",
  "Puede generar divisiones extremas por valores at√≠picos",
  "No necesita preocuparse por colinealidad",
  "F√°cil de entender, especialmente con √°rboles peque√±os",
  "Escalable pero no √≥ptimo en grandes vol√∫menes sin poda",
  "Usa poda y validaci√≥n cruzada para evitar sobreajuste",
  "Tiende al sobreajuste si no se poda o se regulariza"
)

tabla_cart <- data.frame(Criterio = criterios, Aplica = aplica, Detalles = detalles)  

require(gt) 

tabla_cart %>%
 gt() %>%
  tab_header(title = "Gu√≠a r√°pida para elegir CART",
             subtitle = "Classification and Regression Tree (CART)") %>%
   tab_footnote(footnote = "Fuente: Elaboraci√≥n propia") %>%
     tab_options(heading.title.font.size = 14, 
                 heading.subtitle.font.size = 12,
                 table.font.names = "Century Gothic",
                 table.font.size = 10,
                 data_row.padding = px(1)) %>%
      tab_style(style = list(cell_text(align = "left",
                                       weight = 'bold')),
                locations = list(cells_title(groups = c("title")))) %>%
       tab_style(style = list(cell_text(align = "left")),
                 locations = list(cells_title(groups = c("subtitle")))) %>%
        cols_width(starts_with("Detalles") ~ px(500),
                   everything() ~ px(200)) %>%
         as_raw_html() 
```


## Support Vector Machine (SVM)  {-}   

```{r, echo = FALSE}
criterios <- c(
  "Tipo de modelo",
  "Variable respuesta",
  "Variables predictoras",
  "Relaci√≥n entre variables",
  "Normalidad de residuos",
  "Independencia de errores",
  "Homoscedasticidad",
  "Sensible a outliers",
  "Multicolinealidad entre predictores",
  "Interpretabilidad",
  "Velocidad y eficiencia",
  "Validaci√≥n cruzada",
  "No funciona bien si..."
)

aplica <- c(
  "‚úÖ Supervisado",
  "‚úÖ Categ√≥rica o Continua",
  "‚úÖ Num√©ricas (categor√≠as deben codificarse)",
  "‚úÖ Capta relaciones no lineales (kernel)",
  "‚ùå No requiere",
  "‚úÖ Idealmente s√≠",
  "‚ùå No es requisito",
  "‚ö†Ô∏è S√≠, especialmente sin margen amplio",
  "‚úÖ Puede manejarla bien",
  "‚ùå Baja (modelo es una caja negra)",
  "‚ö†Ô∏è Lento con muchos datos o predictores",
  "‚úÖ Esencial para elegir kernel y par√°metros",
  "‚ùå Datos con mucho ruido o solapamiento entre clases"
)

detalles <- c(
  "Modelo supervisado que maximiza el margen entre clases",
  "Clasificaci√≥n binaria, multiclase o regresi√≥n (SVR)",
  "Requiere escalar o estandarizar las variables num√©ricas",
  "Puede usar kernel para resolver problemas no lineales",
  "No requiere supuestos cl√°sicos como normalidad",
  "Mejor si los datos son independientes",
  "Puede usarse aunque haya heterocedasticidad",
  "Los outliers cercanos al margen afectan el modelo",
  "Los kernels pueden reducir el efecto de multicolinealidad",
  "Dif√≠cil de explicar; es un modelo de tipo caja negra",
  "Puede ser costoso computacionalmente con datos grandes",
  "Par√°metros como C y gamma se ajustan v√≠a validaci√≥n cruzada",
  "No es ideal si hay ruido o datos mal etiquetados"
)

tabla_svm <- data.frame(Criterio = criterios, Aplica = aplica, Detalles = detalles)

require(gt) 

tabla_svm %>%
 gt() %>%
  tab_header(title = "Gu√≠a r√°pida para elegir SVM",
             subtitle = "Support Vector Machine (SVM) ") %>%
   tab_footnote(footnote = "Fuente: Elaboraci√≥n propia") %>%
     tab_options(heading.title.font.size = 14, 
                 heading.subtitle.font.size = 12,
                 table.font.names = "Century Gothic",
                 table.font.size = 10,
                 data_row.padding = px(1)) %>%
      tab_style(style = list(cell_text(align = "left",
                                       weight = 'bold')),
                locations = list(cells_title(groups = c("title")))) %>%
       tab_style(style = list(cell_text(align = "left")),
                 locations = list(cells_title(groups = c("subtitle")))) %>%
        cols_width(starts_with("Detalles") ~ px(500),
                   everything() ~ px(200)) %>%
         as_raw_html() 
```


## Iterative Dichotomiser 3 (ID3)  {-}  

```{r, echo = FALSE}
criterios <- c(
  "Tipo de modelo",
  "Variable respuesta",
  "Variables predictoras",
  "Relaci√≥n entre variables",
  "Normalidad de residuos",
  "Independencia de errores",
  "Homoscedasticidad",
  "Sensible a outliers",
  "Multicolinealidad entre predictores",
  "Interpretabilidad",
  "Velocidad y eficiencia",
  "Validaci√≥n cruzada",
  "No funciona bien si..."
)

aplica <- c(
  "‚úÖ Supervisado",
  "‚úÖ Categ√≥rica (clasificaci√≥n)",
  "‚úÖ Principalmente categ√≥ricas (num√©ricas requieren discretizaci√≥n)",
  "‚úÖ No lineal (basado en ganancia de informaci√≥n)",
  "‚ùå No requiere",
  "‚úÖ Deseable, pero no obligatorio",
  "‚ùå No aplica",
  "‚ö†Ô∏è Moderadamente (valores at√≠picos pueden generar ramas poco representativas)",
  "‚úÖ Robusto a multicolinealidad",
  "‚úÖ Alta (√°rbol simple de interpretar)",
  "‚úÖ R√°pido con datos moderados y discretizados",
  "‚úÖ Recomendable para equilibrar datos y evitar overfitting",
  "‚ùå Respuesta continua, muchos valores faltantes o ruido elevado"
)

detalles <- c(
  "Construye un √°rbol de decisi√≥n dividiendo por ganancia de informaci√≥n (entrop√≠a).",
  "Clasifica muestras en categor√≠as discretas, ej. S√≠/No, A/B/C.",
  "Mejor con variables categ√≥ricas nativas; las num√©ricas deben transformarse en rangos.",
  "No asume ninguna relaci√≥n funcional: usa particiones basadas en criterios de informaci√≥n.",
  "No hay residuos en el sentido param√©trico; no exige distribuci√≥n normal.",
  "Las instancias deben ser independientes; no orientado a series temporales.",
  "No requiere varianzas constantes porque no hay t√©rmino de error param√©trico.",
  "Los outliers categ√≥ricos pueden crear nodos muy peque√±os no representativos.",
  "ID3 ignora correlaciones altas, pero demasiadas variables correlacionadas pueden ralentizar la b√∫squeda de mejores divisiones.",
  "Cada nodo muestra la regla de divisi√≥n; el √°rbol global es f√°cil de visualizar para pocos niveles.",
  "La construcci√≥n recursiva es eficiente para datos discretizados; se vuelve lento si hay muchas categor√≠as o atributos.",
  "Se usa para podar y seleccionar profundidad √≥ptima del √°rbol, equilibrando sesgo y varianza.",
  "No es recomendable si la variable objetivo es continua o si hay mucho ruido sin transformar."
)

tabla_id3 <- data.frame(Criterio = criterios, Aplica = aplica, Detalles = detalles)  

tabla_id3 %>%
 gt() %>%
  tab_header(title = "Gu√≠a r√°pida para elegir IDE3",
             subtitle = "Iterative Dichotomiser 3 (ID3)") %>%
   tab_footnote(footnote = "Fuente: Elaboraci√≥n propia") %>%
     tab_options(heading.title.font.size = 14, 
                 heading.subtitle.font.size = 12,
                 table.font.names = "Century Gothic",
                 table.font.size = 10,
                 data_row.padding = px(1)) %>%
      tab_style(style = list(cell_text(align = "left",
                                       weight = 'bold')),
                locations = list(cells_title(groups = c("title")))) %>%
       tab_style(style = list(cell_text(align = "left")),
                 locations = list(cells_title(groups = c("subtitle")))) %>%
        cols_width(starts_with("Detalles") ~ px(500),
                   everything() ~ px(200)) %>%
         as_raw_html() 
```


## C4.5  {-}   

```{r, echo = FALSE}
criterios <- c(
  "Tipo de modelo",
  "Variable respuesta",
  "Variables predictoras",
  "Relaci√≥n entre variables",
  "Normalidad de residuos",
  "Independencia de errores",
  "Homoscedasticidad",
  "Sensible a outliers",
  "Multicolinealidad entre predictores",
  "Interpretabilidad",
  "Velocidad y eficiencia",
  "Validaci√≥n cruzada",
  "No funciona bien si..."
)

aplica <- c(
  "‚úÖ Supervisado",
  "‚úÖ Categ√≥rica (clasificaci√≥n)",
  "‚úÖ Categ√≥ricas y num√©ricas",
  "‚úÖ Captura relaciones no lineales",
  "‚ùå No requiere",
  "‚úÖ Deseable, pero no obligatorio",
  "‚ùå No es relevante",
  "‚ö†Ô∏è Moderadamente (puede hacer overfitting con ruido)",
  "‚úÖ Robusto a multicolinealidad",
  "‚úÖ Alta (√°rbol interpretable)",
  "‚úÖ Relativamente r√°pido",
  "‚úÖ Recomendable para evitar sobreajuste",
  "‚ùå Demasiadas categor√≠as o ruido en datos"
)

detalles <- c(
  "Modelo supervisado tipo √°rbol de decisi√≥n",
  "Clasifica variables categ√≥ricas en ramas l√≥gicas",
  "Divide por puntos de corte para variables num√©ricas",
  "No asume forma funcional entre predictores y respuesta",
  "No necesita normalidad de errores",
  "Mejor si las observaciones son independientes",
  "No requiere varianzas constantes",
  "Datos ruidosos pueden afectar las ramas",
  "No se ve afectado por correlaciones entre predictores",
  "Salida f√°cil de visualizar y explicar",
  "Escala bien para tama√±os de muestra medianos",
  "Evita sobreajuste con poda y validaci√≥n",
  "Muchas clases con pocos datos pueden sobreajustar"
)

tabla_c45 <- data.frame(Criterio = criterios, Aplica = aplica, Detalles = detalles)

tabla_c45 %>%
 gt() %>%
  tab_header(title = "Gu√≠a r√°pida para elegir C4.5") %>%
   tab_footnote(footnote = "Fuente: Elaboraci√≥n propia") %>%
     tab_options(heading.title.font.size = 14, 
                 heading.subtitle.font.size = 12,
                 table.font.names = "Century Gothic",
                 table.font.size = 10,
                 data_row.padding = px(1)) %>%
      tab_style(style = list(cell_text(align = "left",
                                       weight = 'bold')),
                locations = list(cells_title(groups = c("title")))) %>%
       tab_style(style = list(cell_text(align = "left")),
                 locations = list(cells_title(groups = c("subtitle")))) %>%
        cols_width(starts_with("Detalles") ~ px(500),
                   everything() ~ px(200)) %>%
         as_raw_html() 

```


## C5.0  {-}  

```{r, echo = FALSE}
criterios <- c(
  "Tipo de modelo",
  "Variable respuesta",
  "Variables predictoras",
  "Relaci√≥n entre variables",
  "Normalidad de residuos",
  "Independencia de errores",
  "Homoscedasticidad",
  "Sensible a outliers",
  "Multicolinealidad entre predictores",
  "Interpretabilidad",
  "Velocidad y eficiencia",
  "Validaci√≥n cruzada",
  "No funciona bien si..."
)

aplica <- c(
  "‚úÖ Supervisado",
  "‚úÖ Categ√≥rica (clasificaci√≥n)",
  "‚úÖ Categ√≥ricas y num√©ricas",
  "‚úÖ Captura relaciones no lineales",
  "‚ùå No requiere",
  "‚úÖ Deseable, pero no obligatorio",
  "‚ùå No es relevante",
  "‚ö†Ô∏è Moderadamente (puede generar ramas excesivas)",
  "‚úÖ Robusto a multicolinealidad",
  "‚úÖ Alta (√°rbol f√°cil de visualizar)",
  "‚úÖ Relativamente r√°pido en training",
  "‚úÖ Recomendable para evitar sobreajuste",
  "‚ùå Clases muy desbalanceadas sin ajuste"
)

detalles <- c(
  "Algoritmo de √°rbol de decisi√≥n avanzado basado en C4.5",
  "Clasifica en m√∫ltiples categor√≠as (tambi√©n multiclase)",
  "Divide autom√°ticamente variables num√©ricas con puntos de corte",
  "No asume funci√≥n lineal: usa ganancia de informaci√≥n y boosting",
  "No exige normalidad de errores",
  "Mejor si las instancias son independientes",
  "No requiere varianzas constantes",
  "Los valores extremos pueden influir en ramas profundas",
  "No se ve afectado por correlaci√≥n alta entre predictores",
  "Salida clara con reglas y pesos de boosting",
  "M√°s r√°pido que C4.5 y con opciones de boosting",
  "Usar k-fold o repeated CV para determinar par√°metros √≥ptimos",
  "Muchos atributos irrelevantes pueden generar sobreajuste"
)

tabla_c50 <- data.frame(Criterio = criterios, Aplica = aplica, Detalles = detalles)

tabla_c50 %>%
 gt() %>%
  tab_header(title = "Gu√≠a r√°pida para elegir C5.0") %>%
   tab_footnote(footnote = "Fuente: Elaboraci√≥n propia") %>%
     tab_options(heading.title.font.size = 14, 
                 heading.subtitle.font.size = 12,
                 table.font.names = "Century Gothic",
                 table.font.size = 10,
                 data_row.padding = px(1)) %>%
      tab_style(style = list(cell_text(align = "left",
                                       weight = 'bold')),
                locations = list(cells_title(groups = c("title")))) %>%
       tab_style(style = list(cell_text(align = "left")),
                 locations = list(cells_title(groups = c("subtitle")))) %>%
        cols_width(starts_with("Detalles") ~ px(500),
                   everything() ~ px(200)) %>%
         as_raw_html() 

```

## Chi-squared Automatic Interaction Detection (CHAID)  {-}  

```{r, echo = FALSE}
criterios <- c(
  "Tipo de modelo",
  "Variable respuesta",
  "Variables predictoras",
  "Relaci√≥n entre variables",
  "Normalidad de residuos",
  "Independencia de errores",
  "Homoscedasticidad",
  "Sensible a outliers",
  "Multicolinealidad entre predictores",
  "Interpretabilidad",
  "Velocidad y eficiencia",
  "Validaci√≥n cruzada",
  "No funciona bien si..."
)

aplica <- c(
  "‚úÖ Supervisado",
  "‚úÖ Categ√≥rica (clasificaci√≥n multinivel)",
  "‚úÖ Categ√≥ricas nativas (num√©ricas requieren binarizaci√≥n o discretizaci√≥n)",
  "‚úÖ No lineal (explora interacciones autom√°ticas con œá¬≤)",
  "‚ùå No requiere",
  "‚úÖ Deseable, pero no obligatorio",
  "‚ùå No aplica",
  "‚ö†Ô∏è Moderadamente (outliers categ√≥ricos pueden crear nodos muy peque√±os)",
  "‚úÖ Robusto a multicolinealidad (usa œá¬≤, no varianzas)",
  "‚úÖ Media (√°rboles con muchos nodos pueden resultar complejos)",
  "‚ö†Ô∏è Razonablemente r√°pido en datasets moderados, lento si hay muy altas cardinalidades",
  "‚úÖ Recomendable para determinar profundidad y grado de interacci√≥n",
  "‚ùå Variable objetivo continua o muchos niveles con pocas observaciones"
)

detalles <- c(
  "Construye un √°rbol de decisi√≥n usando pruebas œá¬≤ para detectar interacciones entre predictores y variable objetivo.",
  "Dise√±ado para clasificar en m√∫ltiples categor√≠as sin orden; puede manejar targets con m√°s de dos niveles.",
  "Funciona mejor con predictores categ√≥ricos; las variables num√©ricas deben transformarse en categor√≠as mediante binning.",
  "No asume ninguna forma funcional; detecta autom√°ticamente relaciones complejas basadas en œá¬≤.",
  "No depende de supuestos de normalidad de errores ni de forma de distribuci√≥n de residuos.",
  "Las instancias deben ser independientes; no es ideal para datos con fuerte dependencia temporal sin procesar.",
  "Homoscedasticidad no se eval√∫a, ya que no se basa en un t√©rmino de error param√©trico como OLS.",
  "Los valores extremos en variables categ√≥ricas con pocas observaciones pueden crear ramas muy espec√≠ficas, pero CHAID maneja cardinalidades moderadas.",
  "Al basarse en œá¬≤, CHAID no se ve afectado directamente por colinealidad, aunque variables muy correlacionadas pueden crear redundancia en las divisiones.",
  "Cada divisi√≥n se basa en pruebas de œá¬≤; el √°rbol resultante puede interpretarse visualmente, pero muchos niveles pueden reducir claridad.",
  "La creaci√≥n recursiva de nodos por agrupaci√≥n de categor√≠as es eficiente para conjuntos de datos moderados; puede volverse lento si hay muchas categor√≠as de predictores.",
  "Se usa validaci√≥n cruzada para podar el √°rbol y elegir el nivel √≥ptimo de interacci√≥n, equilibrando sesgo y varianza.",
  "No es adecuado si la variable objetivo es continua (sin discretizar) o si hay demasiados niveles con muy pocos casos en cada uno."
)

tabla_chaid <- data.frame(Criterio = criterios, Aplica = aplica, Detalles = detalles)


tabla_chaid %>%
 gt() %>%
  tab_header(title = "Gu√≠a r√°pida para elegir CHAID",
             subtitle = "Chi-squared Automatic Interaction Detection (CHAID)") %>%
   tab_footnote(footnote = "Fuente: Elaboraci√≥n propia") %>%
     tab_options(heading.title.font.size = 14, 
                 heading.subtitle.font.size = 12,
                 table.font.names = "Century Gothic",
                 table.font.size = 10,
                 data_row.padding = px(1)) %>%
      tab_style(style = list(cell_text(align = "left",
                                       weight = 'bold')),
                locations = list(cells_title(groups = c("title")))) %>%
       tab_style(style = list(cell_text(align = "left")),
                 locations = list(cells_title(groups = c("subtitle")))) %>%
        cols_width(starts_with("Detalles") ~ px(500),
                   everything() ~ px(200)) %>%
         as_raw_html() 
```




## Decision Stump  {-} 

```{r, echo = FALSE}
criterios <- c(
  "Tipo de modelo",
  "Variable respuesta",
  "Variables predictoras",
  "Relaci√≥n entre variables",
  "Normalidad de residuos",
  "Independencia de errores",
  "Homoscedasticidad",
  "Sensible a outliers",
  "Multicolinealidad entre predictores",
  "Interpretabilidad",
  "Velocidad y eficiencia",
  "Validaci√≥n cruzada",
  "No funciona bien si..."
)

aplica <- c(
  "‚úÖ Supervisado",
  "‚úÖ Categ√≥rica (clasificaci√≥n) o Continua (regresi√≥n simplificada)",
  "‚úÖ Num√©ricas y/o categ√≥ricas",
  "‚ö†Ô∏è Captura solo una divisi√≥n (muy simple, un solo nodo interno)",
  "‚ùå No requiere",
  "‚úÖ Deseable, pero no obligatorio",
  "‚ùå No relevante",
  "‚úÖ Relativamente robusto (poca complejidad)",
  "‚úÖ Ignora colinealidad (usa solo una variable)",
  "‚úÖ Muy alta (un solo umbral para dividir)",
  "‚úÖ Extremadamente r√°pido",
  "‚úÖ Se puede usar k-fold para evaluar estabilidad",
  "‚ùå No funciona bien si la relaci√≥n es compleja o no hay un buen umbral √∫nico"
)

detalles <- c(
  "Modelo de √°rbol con un solo nivel de decisi√≥n (un umbral en una sola variable).",
  "En clasificaci√≥n predice una clase binaria; en regresi√≥n, un valor medio para cada divisi√≥n.",
  "Selecciona la mejor variable con el punto de corte que maximiza ganancia (clasificaci√≥n) o reduce varianza (regresi√≥n).",
  "Solo ajusta un umbral, por lo que no modela interacciones ni no linealidades complejas.",
  "No hay supuestos param√©tricos de distribuci√≥n de errores.",
  "Mejor si las instancias no est√°n correlacionadas (por ejemplo, no aplica a series de tiempo sin agrupar).",
  "La varianza constante no se eval√∫a, pues el modelo es no param√©trico y muy simple.",
  "Un solo punto de corte es menos sensible a outliers en comparaci√≥n con √°rboles profundos, pero a√∫n puede verse afectado si un outlier define el umbral.",
  "Como solo usa una variable, no se ve afectado por correlaciones altas entre predictores.",
  "El modelo entero es resumido en un √∫nico umbral; f√°cil de explicar.",
  "Muy r√°pido de entrenar y predecir, pues solo se eval√∫a un umbral en un predictor.",
  "Es √∫til para comprobar si hay una √∫nica variable con gran poder predictivo; k-fold ayuda a validar que el umbral se mantenga estable.",
  "No sirve si el problema requiere varias divisiones, interacciones o relaciones no lineales profundas."
)

tabla_stump <- data.frame(Criterio = criterios, Aplica = aplica, Detalles = detalles)

tabla_stump %>%
 gt() %>%
  tab_header(title = "Gu√≠a r√°pida para elegir Decision Stump",
             subtitle = "Decision Stump") %>%
   tab_footnote(footnote = "Fuente: Elaboraci√≥n propia") %>%
     tab_options(heading.title.font.size = 14, 
                 heading.subtitle.font.size = 12,
                 table.font.names = "Century Gothic",
                 table.font.size = 10,
                 data_row.padding = px(1)) %>%
      tab_style(style = list(cell_text(align = "left",
                                       weight = 'bold')),
                locations = list(cells_title(groups = c("title")))) %>%
       tab_style(style = list(cell_text(align = "left")),
                 locations = list(cells_title(groups = c("subtitle")))) %>%
        cols_width(starts_with("Detalles") ~ px(500),
                   everything() ~ px(200)) %>%
         as_raw_html() 
```

## Conditional Decision Trees  {-}  

```{r, echo = FALSE}
criterios <- c(
  "Tipo de modelo",
  "Variable respuesta",
  "Variables predictoras",
  "Relaci√≥n entre variables",
  "Normalidad de residuos",
  "Independencia de errores",
  "Homoscedasticidad",
  "Sensible a outliers",
  "Multicolinealidad entre predictores",
  "Interpretabilidad",
  "Velocidad y eficiencia",
  "Validaci√≥n cruzada",
  "No funciona bien si..."
)

aplica <- c(
  "‚úÖ Supervisado",
  "‚úÖ Continua (regresi√≥n) o Categ√≥rica (clasificaci√≥n)",
  "‚úÖ Num√©ricas y categ√≥ricas",
  "‚úÖ No lineal, usa tests condicionales para particionar",
  "‚ùå No requiere",
  "‚úÖ Deseable, pero no obligatorio",
  "‚ùå No relevante",
  "‚ö†Ô∏è Moderadamente (consume tests basados en permutaciones)",
  "‚úÖ Robusto a colinealidad",
  "‚úÖ Alta (cada divisi√≥n est√° basada en criterios estad√≠sticos claros)",
  "‚ö†Ô∏è M√°s lento que CART en datasets grandes",
  "‚úÖ Recomendable para podar y evitar sobreajuste",
  "‚ùå Datos muy peque√±os por nodo o variables irrelevantes"
)

detalles <- c(
  "Construye √°rboles basados en test de independencia condicional (ctree).",
  "Permite tanto regresi√≥n (valor continuo) como clasificaci√≥n multinivel.",
  "Acepta variables num√©ricas y categ√≥ricas sin necesidad de dummies.",
  "Detecta relaciones complejas y no lineales usando tests basados en permutaciones.",
  "No exige que los residuos sigan una distribuci√≥n espec√≠fica.",
  "Ideal si las observaciones no est√°n correlacionadas en el tiempo.",
  "No requiere homoscedasticidad porque no se basa en un modelo param√©trico de error.",
  "Los outliers pueden afectar el c√°lculo de los tests, aunque es m√°s robusto que CART.",
  "El algoritmo ctree no se ve afectado por predictores altamente correlacionados.",
  "Los √°rboles generados son f√°ciles de visualizar y explicar.",
  "Para cada divisi√≥n realiza m√∫ltiples tests, por lo que es m√°s lento en datos muy grandes.",
  "Usar k-fold o repeated CV para elegir la profundidad y evitar sobreajuste.",
  "No es apto si tienes muy pocas observaciones en cada parto o muchas variables irrelevantes."
)

tabla_ctree <- data.frame(Criterio = criterios, Aplica = aplica, Detalles = detalles)

tabla_ctree %>%
 gt() %>%
  tab_header(title = "Gu√≠a r√°pida para elegir ctree",
             subtitle = "Conditional Decision Trees") %>%
   tab_footnote(footnote = "Fuente: Elaboraci√≥n propia") %>%
     tab_options(heading.title.font.size = 14, 
                 heading.subtitle.font.size = 12,
                 table.font.names = "Century Gothic",
                 table.font.size = 10,
                 data_row.padding = px(1)) %>%
      tab_style(style = list(cell_text(align = "left",
                                       weight = 'bold')),
                locations = list(cells_title(groups = c("title")))) %>%
       tab_style(style = list(cell_text(align = "left")),
                 locations = list(cells_title(groups = c("subtitle")))) %>%
        cols_width(starts_with("Detalles") ~ px(500),
                   everything() ~ px(200)) %>%
         as_raw_html() 

```


## M5  {-} 

```{r, echo = FALSE}
criterios <- c(
  "Tipo de modelo",
  "Variable respuesta",
  "Variables predictoras",
  "Relaci√≥n entre variables",
  "Normalidad de residuos",
  "Independencia de errores",
  "Homoscedasticidad",
  "Sensible a outliers",
  "Multicolinealidad entre predictores",
  "Interpretabilidad",
  "Velocidad y eficiencia",
  "Validaci√≥n cruzada",
  "No funciona bien si..."
)

aplica <- c(
  "‚úÖ Supervisado",
  "‚úÖ Continua",
  "‚úÖ Num√©ricas (categ√≥ricas procesar como dummies)",
  "‚úÖ Lineal por segmentos (√°rbol + regresi√≥n en hojas)",
  "‚ùå No requiere estrictamente",
  "‚úÖ Deseable, pero no obligatorio",
  "‚ùå No es requisito",
  "‚ö†Ô∏è Moderadamente (outliers pueden distorsionar regresiones locales)",
  "‚úÖ Relativamente robusto (regresi√≥n en hojas mitiga algo la colinealidad)",
  "‚ö†Ô∏è Media (√°rbol complejo, hojas lineales m√°s interpretables)",
  "‚ö†Ô∏è Moderado (depende de n√∫mero de nodos y atributos)",
  "‚úÖ Recomendable para optimizar n√∫mero de nodos y hojas",
  "‚ùå Muchos nodos con pocos casos o ruido elevado"
)

detalles <- c(
  "Modelo de √°rbol de regresi√≥n con ajustes lineales en cada hoja.",
  "Predice valores continuos, p. ej., precio, consumo, etc.",
  "Requiere que variables categ√≥ricas se conviertan a indicadores antes de ajuste.",
  "Combina particiones basadas en atributos con regresiones m√∫ltiples en hojas.",
  "No exige que los residuos en cada hoja sean normales, aunque mejora inferencia.",
  "Ideal si las observaciones son independientes; en series de tiempo hay que agrupar.",
  "La varianza constante no es cr√≠tica, cada hoja ajusta localmente.",
  "Los extremos pueden afectar las regresiones locales; poda puede mitigar esto.",
  "El m√©todo divide el espacio antes de ajustar, reduciendo efectos de colinealidad.",
  "El √°rbol completo puede ser grande, pero cada hoja contiene una funci√≥n lineal clara.",
  "Construcci√≥n y poda del √°rbol m√°s costosas que OLS, pero razonables para tama√±os medianos.",
  "Ayuda a determinar n√∫mero √≥ptimo de hojas y complejidad del √°rbol.",
  "Si hay muy pocas observaciones por hoja o ruido demasiado alto, las regresiones locales fallan."
)

tabla_m5 <- data.frame(Criterio = criterios, Aplica = aplica, Detalles = detalles)

tabla_m5 %>%
 gt() %>%
  tab_header(title = "Gu√≠a r√°pida para elegir M5",
             subtitle = "M5 model tree algorithm") %>%
   tab_footnote(footnote = "Fuente: Elaboraci√≥n propia") %>%
     tab_options(heading.title.font.size = 14, 
                 heading.subtitle.font.size = 12,
                 table.font.names = "Century Gothic",
                 table.font.size = 10,
                 data_row.padding = px(1)) %>%
      tab_style(style = list(cell_text(align = "left",
                                       weight = 'bold')),
                locations = list(cells_title(groups = c("title")))) %>%
       tab_style(style = list(cell_text(align = "left")),
                 locations = list(cells_title(groups = c("subtitle")))) %>%
        cols_width(starts_with("Detalles") ~ px(500),
                   everything() ~ px(200)) %>%
         as_raw_html() 
```

